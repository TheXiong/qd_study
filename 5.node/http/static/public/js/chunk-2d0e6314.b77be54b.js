(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d0e6314"],{9865:function(e,t,a){"use strict";a.r(t);var o=a("cebc"),r=a("fb04"),s={name:"projectConf",data:function(){return{uri:"system",configList:[],search:"",dialogFormVisible:!1,form:{hash:"",value:"",note:"",erasable:"1"},rules:{hash:[{required:!0,message:"hash不能为空",trigger:"blur"}],value:[{required:!0,message:"配置值不能为空",trigger:"blur"}],note:[{required:!0,message:"备注不能为空",trigger:"blur"}],erasable:[{required:!0,message:"不能为空",trigger:"blur"}]},formLabelWidth:"120px"}},created:function(){this.formCopy=Object(o.a)({},this.form)},mounted:function(){this.getList()},methods:{getList:function(){var e=this;Object(r.h)({},this.uri).then(function(t){e.configList=t.data.data.data})},handleEdit:function(e){this.form=Object(o.a)({},e),this.dialogFormVisible=!0},addConf:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.form.vv?Object(r.q)(t.form,t.uri):Object(r.a)(t.form,t.uri)).then(function(e){t.$message({showClose:!0,message:e.data.msg,type:"success"}),t.getList(),t.resetForm()})})},statusChange:function(e,t){var a=this;Object(r.k)({vv:t,using:e}).then(function(e){a.$message({showClose:!0,message:e.data.msg,type:"success"}),a.getList()})},handleDel:function(e){var t=this;this.$confirm("你确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.g)({vv:e}).then(function(e){t.$message({showClose:!0,message:e.data.msg,type:"success"}),t.getList()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleClose:function(e){this.resetForm(),e()},closeForm:function(e){this.resetForm()},resetForm:function(){this.dialogFormVisible=!1,this.$refs.ruleForm.resetFields(),this.form=Object(o.a)({},this.formCopy)}}},l=a("2877"),i=Object(l.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.configList.filter(function(t){return!e.search||t.value.toLowerCase().includes(e.search.toLowerCase())||t.note.toLowerCase().includes(e.search.toLowerCase())})}},[a("el-table-column",{attrs:{align:"center",label:"hash",prop:"hash"}}),a("el-table-column",{attrs:{align:"center",label:"配置值",prop:"value"}}),a("el-table-column",{attrs:{align:"center",label:"备注",prop:"note"}}),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"启用","inactive-text":"关闭","active-value":"1","inactive-value":"0"},on:{change:function(a){return e.statusChange(a,t.row.vv)}},model:{value:t.row.using,callback:function(a){e.$set(t.row,"using",a)},expression:"scope.row.using"}})]}}])}),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),"1"===t.row.erasable?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDel(t.row.vv)}}},[e._v("删除")]):e._e()]}}])})],1),a("el-dialog",{attrs:{title:e.form.vv?"编辑":"新增",visible:e.dialogFormVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"hash","label-width":e.formLabelWidth,prop:"hash"}},[a("el-input",{attrs:{type:"text",maxlength:"32","show-word-limit":"",autocomplete:"off"},model:{value:e.form.hash,callback:function(t){e.$set(e.form,"hash",t)},expression:"form.hash"}})],1),a("el-form-item",{attrs:{label:"配置值","label-width":e.formLabelWidth,prop:"value"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}})],1),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth,prop:"note"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1),a("el-form-item",{attrs:{label:"是否可删除","label-width":e.formLabelWidth,prop:"erasable"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.erasable,callback:function(t){e.$set(e.form,"erasable",t)},expression:"form.erasable"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"},model:{value:e.form.erasable,callback:function(t){e.$set(e.form,"erasable",t)},expression:"form.erasable"}},[e._v("否")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.closeForm("ruleForm")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addConf("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},[],!1,null,null,null);t.default=i.exports}}]);