(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d21d455"],{d11c:function(t,e,i){"use strict";i.r(e);var a=i("e814"),n=i.n(a),o=i("cebc"),l=i("24d2"),r={name:"userCheck",components:{Pagination:i("333d").a},data:function(){return{activeTab:"0",itemCheckList:[],listLoading:!1,dialogFormVisible:!1,total:0,listQuery:{page:1,limit:10},queryKey:{search:""},searchRule:{search:[]},form:{audit_idea:"",note:""},rules:{audit_idea:[{required:!0,message:"审核意见不能为空",trigger:"blur"}],note:[]},editVv:null}},mounted:function(){this.fetchWithFilter()},methods:{handleTab:function(t,e){this.fetchWithFilter()},paginationChange:function(t){this.fetchWithFilter()},fetchWithFilter:function(){var t=this;Object(l.K)(Object(o.a)({audit:n()(this.activeTab)},this.listQuery,this.queryKey)).then(function(e){0==e.data.data.data.lists.length&&t.listQuery.page>1?(t.listQuery.page--,t.fetchWithFilter()):(t.itemCheckList=e.data.data.data.lists,t.total=e.data.data.data.total)})},checking:function(t,e){var i=this;this.$confirm("你确定要".concat(1===e?"通过":"不通过","该项目的审核吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.J)({item:t,audit_status:e}).then(function(t){i.$message({showClose:!0,message:t.data.msg,type:"success"}),i.fetchWithFilter()})}).catch(function(){i.$message({type:"info",message:"已取消操作"})})},auditUnpass:function(t){var e=this;this.dialogFormVisible=!0,this.editVv=t,this.form={audit_idea:"",note:""},this.$nextTick(function(){e.$refs.auditForm.clearValidate()})},submitUnpass:function(){var t=this;this.$refs.auditForm.validate(function(e){e&&Object(l.J)(Object(o.a)({item:t.editVv,audit_status:-1},t.form)).then(function(e){t.$message({showClose:!0,message:e.data.msg,type:"success"}),t.dialogFormVisible=!1,t.fetchWithFilter()})})},query:function(){var t=this;this.$refs.searchForm.validate(function(e){e&&t.fetchWithFilter()})},reset:function(){this.queryKey.search="",this.fetchWithFilter()},preview:function(t){var e=document.querySelectorAll('img[myPreview="'+t+'"]');this.openPhotoSwipe(0,e)}}},s=i("2877"),c=Object(s.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-tabs",{on:{"tab-click":t.handleTab},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[i("el-tab-pane",{attrs:{label:"待审核",name:"0"}}),i("el-tab-pane",{attrs:{label:"未通过",name:"-1"}}),i("el-tab-pane",{attrs:{label:"已通过",name:"1"}})],1),i("div",{staticClass:"filter-container"},[i("el-form",{ref:"searchForm",attrs:{inline:!0,rules:t.searchRule,model:t.queryKey},nativeOn:{submit:function(t){t.preventDefault()}}},[i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{model:{value:t.queryKey.search,callback:function(e){t.$set(t.queryKey,"search",e)},expression:"queryKey.search"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.query}},[t._v("查询")]),i("el-button",{attrs:{type:"primary"},on:{click:t.reset}},[t._v("重置")])],1)],1)],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.itemCheckList,"tooltip-effect":"dark",border:"",fit:""}},[i("el-table-column",{attrs:{align:"center",label:"序号","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((t.listQuery.page-1)*t.listQuery.limit+e.$index+1))]}}])}),i("el-table-column",{attrs:{prop:"name",align:"center",label:"名称","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.name))]}}])}),i("el-table-column",{attrs:{prop:"name",align:"center",label:"代理公司","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.agents))]}}])}),i("el-table-column",{attrs:{prop:"name",align:"center",label:"主图","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.img?i("img",{staticClass:"avatar",style:{cursor:"pointer"},attrs:{src:e.row.img,myPreview:"img"+e.$index},on:{click:function(i){return t.preview("img"+e.$index)}}}):t._e()]}}])}),i("el-table-column",{attrs:{prop:"site",align:"center",label:"地址","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.site))]}}])}),i("el-table-column",{attrs:{label:"操作",align:"center",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"===t.activeTab||"-1"===t.activeTab?i("el-button",{attrs:{type:"info",icon:"el-icon-edit"},on:{click:function(i){return t.checking(e.row.vv,1)}}},[t._v("通过")]):t._e(),"0"===t.activeTab||"1"===t.activeTab?i("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(i){return t.auditUnpass(e.row.vv)}}},[t._v("不通过")]):t._e()]}}])})],1),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.paginationChange}}),i("el-dialog",{attrs:{title:"审核",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"auditForm",attrs:{model:t.form,rules:t.rules}},[i("el-form-item",{attrs:{label:"审核意见",prop:"audit_idea"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.audit_idea,callback:function(e){t.$set(t.form,"audit_idea",e)},expression:"form.audit_idea"}})],1),i("el-form-item",{attrs:{label:"备注",prop:"note"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.note,callback:function(e){t.$set(t.form,"note",e)},expression:"form.note"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.submitUnpass}},[t._v("确 定")])],1)],1)],1)},[],!1,null,null,null);e.default=c.exports}}]);