(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-31c6ac46"],{"09fe":function(e,t,s){},"7e63":function(e,t,s){"use strict";var a=s("a39c");s.n(a).a},a39c:function(e,t,s){},b953:function(e,t,s){"use strict";s.r(t);var a=s("f499"),r=s.n(a),o=(s("7f7f"),s("61f7")),c=s("7ded"),n={name:"Register",components:{Particles:s("3333").a},data:function(){var e=this;return{loading:!1,redirect:void 0,prePasswordType:"password",checkPasswordType:"password",captchaText:"获取验证码",isCount:!1,captchaDisabled:!1,regForm:{mobile:"",code:"",password:"",checkPassword:""},regRules:{mobile:[{required:!0,trigger:"blur",validator:function(e,t,s){return Object(o.b)(t)?s():s(new Error("请输入正确的手机号码")),s()}}],code:[{required:!0,trigger:"blur",message:"验证码不能为空"}],password:[{required:!0,trigger:"blur",validator:function(e,t,s){t.length<6||t.length>18?s(new Error("密码必须在6~18位之间")):s()}}],checkPassword:[{required:!0,trigger:"blur",validator:function(t,s,a){""===s?a(new Error("请再次输入密码")):s!==e.regForm.password?a(new Error("两次输入密码不一致!")):a()}}]},sendCaptchaTimes:0}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},created:function(){},mounted:function(){},destroyed:function(){},methods:{showPwd:function(e){"password"===this[e]?this[e]="":this[e]="password"},handleRegister:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(t.sendCaptchaTimes){var s=JSON.parse(r()(t.regForm));t.loading=!0,delete s.checkPassword,Object(c.e)(s).then(function(e){t.$message({showClose:!0,message:e.data.msg,type:"success"}),t.loading=!1,t.toLogin()}).catch(function(e){t.loading=!1})}else t.$message({showClose:!0,message:"未发送验证码",type:"error"})})},toLogin:function(){this.$router.push({path:"/login",query:{redirect:this.redirect}})},sendCaptcha:function(){var e=this;this.$refs.regForm.validateField(["mobile"],function(t){if(t)e.$message({showClose:!0,message:"请先输入正确的电话号码",type:"error"});else{Object(c.a)({mobile:e.regForm.mobile}).then(function(t){e.$message({showClose:!0,message:t.data.msg,type:"success"})}),e.sendCaptchaTimes++;var s=60;e.captchaDisabled=!0,e.isCount=!0,e.captchaText=s+"秒后重新获取";var a=setInterval(function(){s--,e.captchaText=s+"秒后重新获取",e.captchaDisabled=!0,e.isCount=!0,0===s&&(e.isCount=!1,e.captchaDisabled=!1,e.captchaText="获取验证码",clearInterval(a))},1e3)}})}}},i=(s("7e63"),s("c346"),s("2877")),l=Object(i.a)(n,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-container"},[s("el-form",{ref:"regForm",staticClass:"login-form",attrs:{model:e.regForm,rules:e.regRules,"auto-complete":"on","label-position":"left"}},[s("div",{staticClass:"title-container"},[s("h3",{staticClass:"title"},[e._v("设置密码/找回密码")])]),s("el-form-item",{attrs:{prop:"mobile"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"user"}})],1),s("el-input",{attrs:{placeholder:"请输入电话号码",name:"mobile",type:"text","auto-complete":"on"},model:{value:e.regForm.mobile,callback:function(t){e.$set(e.regForm,"mobile",t)},expression:"regForm.mobile"}})],1),s("el-form-item",{attrs:{prop:"captcha"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"captcha"}})],1),s("el-input",{staticClass:"captcha-input",attrs:{placeholder:"请输入验证码",name:"captcha",type:"text","auto-complete":"on"},model:{value:e.regForm.code,callback:function(t){e.$set(e.regForm,"code",t)},expression:"regForm.code"}}),s("span",{staticClass:"captcha-container"},[s("el-button",{class:{captchaCount:e.isCount},attrs:{disabled:e.captchaDisabled,type:"primary"},on:{click:e.sendCaptcha}},[e._v(e._s(e.captchaText))])],1)],1),s("el-form-item",{attrs:{prop:"password"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"password"}})],1),s("el-input",{attrs:{type:e.prePasswordType,placeholder:"请输入6~18位密码",name:"password","auto-complete":"on"},model:{value:e.regForm.password,callback:function(t){e.$set(e.regForm,"password",t)},expression:"regForm.password"}}),s("span",{staticClass:"show-pwd",on:{click:function(t){return e.showPwd("prePasswordType")}}},[s("svg-icon",{attrs:{"icon-class":"password"===e.prePasswordType?"eye":"eye-open"}})],1)],1),s("el-form-item",{attrs:{prop:"checkPassword"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"password"}})],1),s("el-input",{attrs:{type:e.checkPasswordType,placeholder:"请确认密码",name:"checkPassword","auto-complete":"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleRegister("regForm")}},model:{value:e.regForm.checkPassword,callback:function(t){e.$set(e.regForm,"checkPassword",t)},expression:"regForm.checkPassword"}}),s("span",{staticClass:"show-pwd",on:{click:function(t){return e.showPwd("checkPasswordType")}}},[s("svg-icon",{attrs:{"icon-class":"password"===e.checkPasswordType?"eye":"eye-open"}})],1)],1),s("el-button",{attrs:{type:"text"},nativeOn:{click:function(t){return t.preventDefault(),e.toLogin(t)}}},[e._v("返回登录页")]),s("el-button",{staticStyle:{width:"100%","margin-top":"10px","margin-left":"0"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleRegister("regForm")}}},[e._v("提交")])],1),s("particles")],1)},[],!1,null,"cb9695b0",null);t.default=l.exports},c346:function(e,t,s){"use strict";var a=s("09fe");s.n(a).a}}]);