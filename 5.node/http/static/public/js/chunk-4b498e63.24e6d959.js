(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4b498e63"],{"9b7b":function(e,t,a){"use strict";a.r(t);var s=a("cebc"),r=a("795b"),n=a.n(r),o=(a("ac6a"),a("5df3"),a("75fc")),i=a("f499"),l=a.n(i),u=a("24d2"),c={data:function(){return{activeNames:["2"],confList:{list:[]},confListSaved:[],currentGroup:"",currentType:"",currentSourceType:"",itemParaData:{list:[]},itemParaRule:{key:{label:"参数名",rule:[{required:!0,message:"参数名不能为空",trigger:"blur"},{validator:function(e,t,a){t.length>200&&a("参数名过长"),a()}}]},value:{label:"值",rule:[{required:!0,message:"值不能为空",trigger:"blur"}]}},houseTypeData:{list:[]},houseTypeRule:{name:{label:"名称",rule:[{required:!0,message:"名称不能为空",trigger:"blur"}]},sort:{label:"排序",rule:[]}},houseSourceData:{list:[]},houseSourceRule:{val:{label:"名称",rule:[{required:!0,message:"名称不能为空",trigger:"blur"}]},added:{label:"值",rule:[{required:!0,message:"值不能为空",trigger:"blur"}]}}}},watch:{currentGroup:function(e,t){this.getItemConfLists()},currentType:function(e,t){this.getItemConfLists()},currentSourceType:function(e,t){this.getHouseSource()}},mounted:function(){this.getGroup(),this.getHouseType(),this.getHouseSource()},methods:{handleChange:function(){},getGroup:function(){var e=this;Object(u.v)().then(function(t){e.confList.list=t.data.data.data,e.confListSaved=t.data.data.data,e.currentGroup=e.confListSaved[0].lists[0].vv,e.currentType=e.confListSaved[1].lists[0].vv,e.currentSourceType=e.confListSaved[1].lists[0].vv})},getItemConfLists:function(){var e=this;Object(u.C)({item:0,item_conf:this.currentGroup,house_type:this.currentType}).then(function(t){var a={};t.data.data.data.length>0?a.list=t.data.data.data:a.list=[{item:0,key:"",value:"",item_conf:e.currentGroup,house_type:e.currentType,sort:0}],e.itemParaData=a})},addOne:function(e,t,a){var s=JSON.parse(l()(this.confList));s.list[e].lists.splice(t+1,0,{mark:a,value:"",sort:0}),this.confList=s},delOne:function(e,t,a){var s=this,r=JSON.parse(l()(this.confList));r.list[e].lists.length>1?a?Object(u.g)({vv:a}).then(function(a){s.$message({showClose:!0,message:a.data.msg,type:"success"}),s.getGroup(),r.list[e].lists.splice(t,1),s.confList=r}):(r.list[e].lists.splice(t,1),this.confList=r):this.$message({showClose:!0,message:"不能全部删除",type:"error"})},addGroup:function(e,t){var a=JSON.parse(l()(this.confList));a.list[e].lists.push({mark:t,value:"",sort:0}),this.confList=a},saveAllGroup:function(){var e=this;this.$refs.groupForm.validate(function(t){if(t){for(var a=e.confList.list,s=[],r=0;r<a.length;r++)s=[].concat(Object(o.a)(s),Object(o.a)(a[r].lists));Object(u.n)({data:s}).then(function(t){e.$message({showClose:!0,message:t.data.msg,type:"success"}),e.getGroup()})}})},addOneConf:function(e){this.$refs.itemParaForm.clearValidate();var t=JSON.parse(l()(this.itemParaData));t.list.splice(e+1,0,{item:0,key:"",value:"",item_conf:this.currentGroup,house_type:this.currentType,sort:0}),this.itemParaData=t},addMorePara:function(){var e=JSON.parse(l()(this.itemParaData));e.list.push({item:0,key:"",value:"",item_conf:this.currentGroup,house_type:this.currentType,sort:0}),this.itemParaData=e},delOneConf:function(e,t){var a=this;this.$refs.itemParaForm.clearValidate();var s=JSON.parse(l()(this.itemParaData));t?Object(u.l)({vv:t}).then(function(t){a.$message({showClose:!0,message:t.data.msg,type:"success"}),s.list.splice(e,1),a.itemParaData=s}):s.list.length>1&&(s.list.splice(e,1),this.itemParaData=s)},saveAllPara:function(){var e=this;this.$refs.itemParaForm.validate(function(t){t&&e.itemParaData.list.length>0&&Object(u.t)({datas:e.itemParaData.list}).then(function(t){e.$message({showClose:!0,message:t.data.msg,type:"success"}),e.getItemConfLists()})})},getHouseType:function(){var e=this;Object(u.B)({item:0}).then(function(t){var a={};a.list=t.data.data.data,e.houseTypeData=a})},addHouseType:function(){var e=JSON.parse(l()(this.houseTypeData));e.list.push({item:0,name:"",sort:""}),this.houseTypeData=e},submitHouseType:function(e,t){var a=this,r=[];for(var o in this.houseTypeRule)r.push("list."+t+"."+o);var i=this;n.a.all(r.map(function(e){return new n.a(function(t,a){i.$refs.houseTypeForm.validateField(e,function(e){t(e)})})})).then(function(t){t.filter(function(e){return e}).length||(e.vv?Object(u.r)(Object(s.a)({},e,{item:0})):Object(u.d)(Object(s.a)({},e,{item:0}))).then(function(e){a.$message({showClose:!0,message:e.data.msg,type:"success"}),a.getHouseType()})})},saveAllHouseType:function(){},delHouseType:function(e,t){var a=this;Object(u.k)({vv:e.vv,item:0}).then(function(e){a.$message({showClose:!0,message:e.data.msg,type:"success"}),a.getHouseType()})},getHouseSource:function(){var e=this;Object(u.z)({item:0,house:0,key:this.currentSourceType}).then(function(t){var a={};a.list=t.data.data.data,e.houseSourceData=a})},addHouseSource:function(){var e=JSON.parse(l()(this.houseSourceData));e.list.push({item:0,house:0,val:"",added:"",sort:"",key:this.currentSourceType}),this.houseSourceData=e},submitHouseSource:function(e,t){var a=this,r=[];for(var o in this.houseSourceRule)r.push("list."+t+"."+o);var i=this;n.a.all(r.map(function(e){return new n.a(function(t,a){i.$refs.houseSourceForm.validateField(e,function(e){t(e)})})})).then(function(t){t.filter(function(e){return e}).length||(e.vv?Object(u.q)(Object(s.a)({},e,{key:a.currentSourceType})):Object(u.c)(Object(s.a)({},e,{key:a.currentSourceType}))).then(function(e){a.$message({showClose:!0,message:e.data.msg,type:"success"}),a.getHouseSource()})})},delHouseSource:function(e,t){var a=this;Object(u.j)({vv:e.vv,item:0,house:0,key:this.currentSourceType}).then(function(e){a.$message({showClose:!0,message:e.data.msg,type:"success"}),a.getHouseSource()})}}},p=(a("f69a"),a("2877")),f=Object(p.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-collapse",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"项目基础配置",name:"1"}},[a("el-form",{ref:"groupForm",attrs:{model:e.confList}},[e._l(e.confList.list,function(t,s){return a("div",{key:s,staticClass:"group"},[a("el-row",[a("el-col",{staticClass:"title",attrs:{span:4}},[e._v(e._s(t.name))]),a("el-col",{staticClass:"group_item_list",attrs:{span:10}},e._l(t.lists,function(r,n){return a("el-form-item",{key:r.vv,attrs:{prop:"list."+s+".lists."+n+".value",rules:[{required:!0,message:"不能为空",trigger:"blur"}]}},[a("el-row",[a("el-col",{staticClass:"inp",attrs:{span:16}},[a("el-input",{attrs:{type:"text",maxlength:"10","show-word-limit":"",autocomplete:"off"},model:{value:r.value,callback:function(t){e.$set(r,"value",t)},expression:"conf.value"}})],1),a("el-col",{staticClass:"btn",attrs:{span:8}},[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary",circle:""},on:{click:function(a){return e.addOne(s,n,t.mark)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-minus",circle:""},on:{click:function(t){return e.delOne(s,n,r.vv)}}})],1)],1)],1)}),1)],1),a("el-row",[a("el-col",{staticClass:"title",staticStyle:{height:"36px"},attrs:{span:4}}),a("el-col",{attrs:{span:10}},[a("el-button",{on:{click:function(a){return e.addGroup(s,t.mark)}}},[e._v("追加")])],1)],1)],1)}),a("el-button",{on:{click:e.saveAllGroup}},[e._v("保存")])],2)],1),a("el-collapse-item",{attrs:{title:"项目参数配置",name:"2"}},[a("el-radio-group",{staticStyle:{"margin-bottom":"30px"},model:{value:e.currentGroup,callback:function(t){e.currentGroup=t},expression:"currentGroup"}},e._l(e.confListSaved.length>0?e.confListSaved[0].lists:[],function(t,s){return a("el-radio-button",{key:s,attrs:{label:t.vv}},[e._v(e._s(t.value))])}),1),a("br"),a("el-radio-group",{staticStyle:{"margin-bottom":"30px"},model:{value:e.currentType,callback:function(t){e.currentType=t},expression:"currentType"}},e._l(e.confListSaved.length>0?e.confListSaved[1].lists:[],function(t,s){return a("el-radio-button",{key:s,attrs:{label:t.vv}},[e._v(e._s(t.value))])}),1),a("el-form",{ref:"itemParaForm",staticClass:"confForm",attrs:{model:e.itemParaData}},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.itemParaData.list}},[e._l(e.itemParaRule,function(t,s){return a("el-table-column",{key:s,attrs:{align:"center",label:t.label},scopedSlots:e._u([{key:"default",fn:function(r){return[a("el-form-item",{attrs:{prop:"list."+r.$index+"."+s,rules:t.rule}},[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:r.row[s],callback:function(t){e.$set(r.row,s,t)},expression:"scope.row[key]"}})],1)]}}])})}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary",circle:""},on:{click:function(a){return e.addOneConf(t.$index)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-minus",circle:""},on:{click:function(a){return e.delOneConf(t.$index,t.row.vv)}}})]}}])})],2),a("el-button",{on:{click:e.addMorePara}},[e._v("追加")]),a("el-button",{on:{click:e.saveAllPara}},[e._v("保存")])],1)],1),a("el-collapse-item",{attrs:{title:"项目户型配置",name:"3"}},[a("el-form",{ref:"houseTypeForm",staticClass:"confForm",attrs:{model:e.houseTypeData}},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.houseTypeData.list}},[e._l(e.houseTypeRule,function(t,s){return a("el-table-column",{key:s,attrs:{align:"center",label:t.label},scopedSlots:e._u([{key:"default",fn:function(r){return[a("el-form-item",{attrs:{prop:"list."+r.$index+"."+s,rules:t.rule}},[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:r.row[s],callback:function(t){e.$set(r.row,s,t)},expression:"scope.row[key]"}})],1)]}}])})}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.submitHouseType(t.row,t.$index)}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return e.delHouseType(t.row,t.$index)}}},[e._v("删除")])]}}])})],2),a("el-button",{on:{click:e.addHouseType}},[e._v("追加")])],1)],1),a("el-collapse-item",{attrs:{title:"项目房源配置",name:"4"}},[a("el-radio-group",{staticStyle:{"margin-bottom":"30px"},model:{value:e.currentSourceType,callback:function(t){e.currentSourceType=t},expression:"currentSourceType"}},e._l(e.confListSaved.length>0?e.confListSaved[1].lists:[],function(t,s){return a("el-radio-button",{key:s,attrs:{label:t.vv}},[e._v(e._s(t.value))])}),1),a("el-form",{ref:"houseSourceForm",staticClass:"confForm",attrs:{model:e.houseSourceData}},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.houseSourceData.list}},[e._l(e.houseSourceRule,function(t,s){return a("el-table-column",{key:s,attrs:{align:"center",label:t.label},scopedSlots:e._u([{key:"default",fn:function(r){return[a("el-form-item",{attrs:{prop:"list."+r.$index+"."+s,rules:t.rule}},[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:r.row[s],callback:function(t){e.$set(r.row,s,t)},expression:"scope.row[key]"}})],1)]}}])})}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.submitHouseSource(t.row,t.$index)}}},[e._v("保存")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return e.delHouseSource(t.row,t.$index)}}},[e._v("删除")])]}}])})],2),a("el-button",{on:{click:e.addHouseSource}},[e._v("追加")])],1)],1)],1)],1)},[],!1,null,"cf23108a",null);t.default=f.exports},cd67:function(e,t,a){},f69a:function(e,t,a){"use strict";var s=a("cd67");a.n(s).a}}]);